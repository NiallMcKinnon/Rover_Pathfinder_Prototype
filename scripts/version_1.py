import matplotlib.pyplot as plt
import random
import math

class PathPlanner:

    def __init__(self):

        self.graph_size = 50

        self.figure = plt.figure()
        self.ax = self.figure.add_subplot(111)
        self.ax.set_xlim([0, self.graph_size])
        self.ax.set_ylim([0, self.graph_size])

        self.start_point = [0, 0]
        self.end_point = [self.graph_size, self.graph_size]
        # self.start_point = [0, random.uniform(0, self.graph_size)]
        # self.end_point = [self.graph_size, random.uniform(0, self.graph_size)]
        
        self.waypoints = [self.start_point, self.end_point]

        self.resolution = 0.2 # 0.05
        self.robot_radius = 1.0
        self.tolerance = self.robot_radius

        self.num_obstacles = 5 * self.graph_size#300
        self.obstacles = []#[[5,5], [2.58,3.91]]
        # self.obstacles = [[29.64301161648482, 19.228864556745513], [17.550341295162767, 16.519604244529603], [46.79298087467335, 14.564476593564216], [3.0852062311914996, 36.78028053283339], [13.484110735455333, 16.642636300570942], [32.79570385399833, 25.240144349769952], [44.85421266227616, 30.278428494027768], [43.22749862306028, 24.26226716398216], [16.26018660833344, 6.384532644607848], [39.56256358358784, 29.236201081283617], [45.060354467462304, 31.146492263584456], [26.61211013420527, 11.468836351406644], [13.702283330698004, 8.47296836793507], [16.230155521160377, 12.915441955464498], [25.52979923908959, 9.327108642469652], [22.282870071520364, 46.19718090852173], [40.7098444985186, 16.651469629306003], [33.608486614291834, 19.93525892927682], [18.804012553810143, 38.049575418924846], [22.411830665621764, 20.505890182993472], [38.42284085836082, 44.171550990974545], [2.0430686967432212, 34.3930727701684], [23.86562164729993, 38.39834496839254], [35.60476020596796, 41.74093561283739], [27.97919250766238, 20.499137105817905], [17.083577399923865, 3.434950560013479], [3.349827366229016, 46.95329037094755], [30.199610085630326, 19.186398083624788], [40.47768573067612, 18.625171811511443], [46.67259809579784, 44.1621794117858], [44.951543739286215, 40.11881539860652], [18.71695650037347, 11.863859874157361], [5.465367105180469, 40.8184163704678], [37.28664610897031, 38.53182459453233], [6.84723440286723, 39.063844536613345], [37.57555936332895, 39.63927485743249], [15.976208313473698, 41.09176028571255], [18.90980907568074, 37.763804224260134], [43.02334534845123, 15.953857846607306], [28.581815867162536, 39.40031600094979], [10.7511681648122, 22.218086715212415], [34.51109066324596, 27.42769563180988], [17.949159092561075, 29.025802628869624], [47.0743141604666, 41.36207233336053], [22.32882566564473, 26.402670713814928], [36.43360014013455, 7.462899132827224], [9.658774841799296, 32.29722263134711], [26.81312816247106, 42.430059467549505], [24.4667184902835, 20.037807330879172], [32.2607650776227, 11.078756030642264], [29.149957188338007, 30.91249063201184], [26.563927429402973, 39.54016352740833], [13.82307464099761, 4.644307929458801], [42.301567862613894, 34.9299435430548], [44.146236833516994, 29.640001121911045], [36.70054211359371, 44.45499716711759], [38.28178461500596, 31.862774910877185], [42.027362735064855, 35.792346016651514], [47.099431410357994, 32.68522165235038], [5.158773275511476, 20.456628200526033], [20.757807203178228, 28.1817080541509], [22.852801999261043, 3.110886968783891], [14.327726656237488, 15.837617516924018], [25.80719459644867, 40.678962443026116], [47.70627742460643, 45.630927684916195], [35.38167172511638, 36.630365476226416], [45.88931267032915, 37.210285123367306], [11.632153054509665, 19.793717103226385], [33.556913311815116, 23.520930915859388], [22.869707806920676, 45.73476681684716], [37.83666153206602, 5.2244937334199495], [7.6111485937264804, 7.3215058808613955], [45.779056610605465, 45.21482495171069], [19.0253285572272, 22.841940191097823], [16.360135842266452, 19.337344733511205], [44.94603141507945, 6.054199781894118], [12.353905052513765, 45.4004671478339], [32.706384011290865, 18.199573230644653], [38.03724827285705, 5.918809281624578], [20.16559515609765, 21.85905644737854], [25.49176547669901, 6.547338369466373], [6.129894028859744, 43.68195051638124], [20.612871411783516, 47.123543325947225], [33.689459240326286, 33.173832367626105], [31.572336473189484, 37.04084476219001], [47.37743089181031, 29.3843785531395], [36.871754515725094, 40.61864964961894], [9.131573530826076, 4.1070900344940675], [36.04242030431281, 10.632434125048482], [2.246265276710999, 13.784472801813681], [21.373375063924026, 43.58382324457838], [9.290206532255802, 29.689059224013462], [5.8664788372325924, 36.2537460884621], [19.824949957866956, 14.49913648519344], [35.50111374223357, 36.855931417019754], [15.144513722919827, 14.43650431851499], [43.71724232400529, 43.36587421041], [12.536478942158816, 25.315189496211328], [14.679988151946493, 7.711529140537392], [22.733208353310026, 20.888579659121202], [3.3353163654146645, 17.475620518268688], [30.162168892353137, 41.89162526128674], [28.206388760883637, 24.982650399295917], [38.386811636354075, 34.691692603087546], [8.145236782703131, 3.2527371258317865], [42.184284390839515, 45.58751590989071], [20.664195496368396, 5.336722969661591], [6.516545393954145, 28.458676071937937], [21.956668097616088, 36.927336611931544], [27.76373014061871, 10.535654379551097], [19.68607820113146, 47.58903727682024], [46.926999543200345, 24.645937281629482], [3.6656567938821247, 13.206041864531603], [44.85914206911855, 34.49484294998319], [21.451656497408965, 13.777937908808875], [32.059981361256035, 25.761819892621514], [14.136185778264203, 8.495673527141902], [3.241222209254672, 28.19062118352104], [32.115903940220804, 2.280904202313447], [18.89083789467174, 18.283994286271778], [42.496807288992734, 22.001781663211712], [5.905382115253598, 13.73882513855798], [21.569265600992797, 37.01383588545031], [2.4958073187294314, 44.18506665135845], [41.038289668557304, 23.252142623029805], [29.180909316886083, 25.998101484756194], [38.799346753435515, 20.912148409851383], [5.454461785843358, 32.22807635806291], [8.558856578927708, 5.292432246243076], [37.13826421392345, 10.888173063963444], [26.632899934738894, 31.460584203934882], [9.044526335055867, 14.384187390153823], [33.29183186686625, 27.808374132867478], [8.075001853415944, 2.1919440918194493], [45.623568012202476, 38.303210191377026], [18.587993206572865, 46.046854715982484], [22.4154595636372, 27.384463759829575], [15.916077821367672, 20.80019197203923], [44.20241352578646, 47.414394422882424], [38.100394965596834, 39.89544010740783], [37.623550871551124, 2.13221743531472], [40.43369873881862, 38.50898635958929], [14.17928535159173, 20.406646249237433], [38.782590582757, 46.007334011012865], [40.807316130492545, 44.72788616042778], [46.13287268325873, 20.856824172591928], [21.818355206381298, 43.874033481994545], [47.871710038958234, 37.2223858815902], [9.096242881844384, 21.972654709233993], [33.99622246230756, 28.956982092433694], [19.38137485691913, 26.319175746561456], [3.237447175210681, 42.49512155695832], [42.30051148935262, 44.733199994772335], [4.008320775415497, 8.121116098110157], [16.442899739497904, 43.05269169266976], [44.75270476565216, 6.249402275328624], [38.03443317555471, 45.68197046050793], [5.477621435467686, 19.44210011087865], [5.6312103304659615, 3.032650895673919], [5.739273915992481, 14.310853016335674], [29.610182780099976, 29.075313688393738], [40.25865532421034, 42.49314715238697], [33.34122054860541, 41.787495208988375], [17.18850629262446, 26.392918282981565], [12.090785000571163, 23.391338025286515], [41.67661387889234, 41.16596061190697], [46.0692232917837, 26.290256327797156], [34.15651707592246, 21.872028939338545], [2.1747413764517542, 44.226090054046956], [13.755367857659445, 29.530899987895022], [47.398441381979055, 5.089815241655835], [17.385297615246166, 29.214679957563746], [11.01830509083884, 10.622679547701372], [21.16400108347487, 47.079148188159785], [17.94757411381248, 41.79542620108784], [5.697956308229557, 31.772574296119327], [23.093608740248158, 7.30081044273141], [2.2619450918727626, 46.082940697233234], [19.510497613686596, 3.7651203645907234], [35.908568848169736, 32.64432876347474], [46.19208884257957, 3.996281729707243], [9.678525086556352, 16.158346245069318], [8.894028862797136, 13.930804072191322], [41.14586345439352, 11.583003488654917], [39.369449174668986, 32.48171662276481], [35.9700677387019, 7.2509206415720495], [13.62662356589351, 5.639155879965004], [5.425029058842125, 26.33953246425286], [19.172526640859214, 39.562217932454985], [12.129788197868049, 31.433894732980335], [35.60382086902952, 41.30030063608824], [47.50747619199508, 21.85608540022836], [46.569509372134405, 6.09207657714453], [45.265929265244594, 28.858159153566582], [29.80047307036515, 20.351776425773906], [11.421776346901154, 26.922164201386515], [8.702316942533736, 26.10130470583786], [36.52149592033574, 24.636928143053336], [23.80778518214138, 25.55709422042112], [41.113277706849594, 28.163908156478502], [4.872615444210163, 32.29466633062243], [18.937455205692455, 12.066098565673974], [19.88445673457479, 4.932226326320883], [39.87250626823003, 9.238993922689929], [21.442294959937914, 8.05709698025615], [40.419624329322616, 45.21305622382627], [33.74596779091376, 40.214781263196805], [19.771336943917067, 2.166143185324781], [7.576856324229882, 16.73057093779954], [31.994226503903416, 28.968174959855517], [33.415436439946475, 21.969405314491976], [14.045109788442963, 38.77906457508714], [33.25623430801521, 26.898615776562306], [40.24070522185554, 9.791530645851514], [41.840236894686555, 8.39960639741164], [24.345666155624624, 10.990550832493888], [10.73542133085268, 36.95922729066527], [46.20050540942149, 16.427259839910622], [7.554821391908963, 12.012273405703349], [11.002414155397888, 38.96565899398865], [18.335812595427125, 15.228224317360922], [14.65883793003654, 13.254621680854468], [29.591533153616044, 10.397096270856242], [37.76009344735918, 47.374402337936466], [9.725295596482395, 43.76422550859066], [13.075673888641106, 22.507063443858037], [44.700764272788085, 14.557281624949633], [16.86348382085955, 33.48873254678783], [44.804527729180656, 16.08961504881143], [45.30865401700762, 3.9515467405745017], [46.3207327324427, 22.907430289671083], [4.242699437722935, 23.573761276590997], [36.28011759092392, 36.300770924959394], [33.62066777704927, 31.029894118325075], [15.95531449112211, 22.387549702011107], [36.33103416014305, 17.49454364658601], [3.6603955224730838, 10.071183511953294], [2.6648111252486286, 8.88391543327021], [46.70583017299928, 11.449712280061547], [46.66795486519661, 44.082313716615275], [45.052527236691844, 33.234129303045215], [16.03952126927233, 12.897315612936708], [47.88291311992062, 37.36749242311046], [14.831674745721928, 11.93395719793958], [10.097546812133965, 25.532465634897935], [9.511431756518235, 33.16217573237519], [47.95030694529157, 42.575217473227774], [6.995960713257238, 5.165878129311891], [2.651210257600421, 5.83968858334367], [24.735312799083545, 17.853441455467703]]
        # self.obstacles = [[16.046259796312032, 24.444399199127663], [11.776980676918214, 10.631741043942696], [29.02953410028653, 19.681676720504264], [35.44446234471804, 36.27179311824158], [4.319484911938366, 8.201301119326516], [34.721843086239836, 2.8423304672483116], [4.000274155016209, 35.48451264142962], [12.608440487899585, 45.52166252999098], [15.37982437146813, 6.869164123715844], [46.075777660704965, 17.924855596861242], [8.682625087236765, 15.783535987983653], [14.04245590918464, 11.20389222389898], [29.761804120311297, 25.931302632567398], [19.825700209687902, 2.8997145336671295], [25.81424733004423, 42.682864700322654], [32.857471517175995, 28.283092084700005], [43.52445764719925, 23.297643862411043], [27.938032166011265, 22.861778092769782], [4.583876969015356, 42.068799855450585], [46.29201878705673, 3.4107490617249288], [2.130229643084215, 40.15950752209315], [23.971448118665663, 23.37482178957705], [22.96266278861933, 19.17968659462472], [36.026711599146374, 30.94125116825473], [3.7054957018062264, 36.019478078714485], [36.33433769512821, 3.7960110308890727], [23.27364668867301, 10.949670236877452], [26.311162386312976, 36.78429205880908], [5.3596562260991245, 31.187596813041527], [28.221303188138375, 12.159618383666315], [2.9689989742445277, 2.0282258104008974], [32.84669024733561, 4.856566937756877], [4.7221326294929575, 17.200289677263214], [12.626555443635755, 3.6497541828315816], [11.80674965337219, 26.440738756649974], [24.067173258136844, 37.9817720792626], [13.089825145068417, 19.913839946663167], [23.518001518311944, 41.01245895264685], [46.176228154608054, 40.36778418838396], [2.554170088431242, 35.19446438012306], [37.69592959962592, 28.72238678880597], [46.207674147968675, 9.37798777133375], [38.075564048079784, 21.740544590781987], [39.296900194186904, 3.989217455608071], [40.90447665165285, 20.855358537157596], [13.216328405100333, 47.477604777515474], [14.954849335204965, 14.665258987214065], [5.020691024120229, 29.085655987928405], [45.201826917503176, 46.883025234284204], [3.4469820794341173, 40.879518516625524], [14.06065052111888, 4.055585784071734], [35.256845743656434, 41.760682249837224], [39.04087090928353, 20.92905770306153], [6.8841855373701035, 12.620315515103627], [41.36320998578451, 45.68443150652261], [31.00520562837498, 21.445413596394857], [30.441709064773494, 16.63469200325943], [31.593134549156975, 2.153223684050827], [4.676403864567843, 4.506684292746995], [7.233208775428798, 15.096806469014135], [23.690178877116676, 45.772880337642576], [8.74013446208178, 18.672691603476412], [32.5251894433612, 31.454929362999398], [47.97087059463846, 40.828555681167785], [30.243935016920425, 23.04646490361904], [15.061092897508793, 15.670846355000233], [22.229272992962688, 13.761212315478906], [30.766620883629937, 46.060891095196176], [5.237480706579644, 6.4264378917240155], [20.112347865042718, 44.79380913181386], [9.239879940338177, 29.08622041250111], [2.6864142074738266, 7.459932864694107], [21.89937721814119, 41.898343165828166], [36.310309712463635, 5.324047054550946], [20.71826460926932, 21.49074764856712], [35.93761074064095, 22.490744530047955], [11.13727236379107, 21.341340790714863], [2.756606770619589, 30.815195738615248], [31.332669866546304, 35.62994419730797], [47.7026597974679, 45.763010319208895], [25.986936135965966, 5.295377253379222], [2.694159559337769, 28.878846737543146], [30.69222212782967, 23.275961354998593], [24.255892333314442, 47.93075484080352], [12.67529943514149, 39.990140915667986], [6.747661088045013, 27.620161567472373], [39.99922704329534, 15.887456335527503], [27.602767053832157, 30.076319752442764], [16.86633861467731, 39.460953396946266], [16.118254980357264, 20.38892360523073], [14.72231492097076, 32.0279944588212], [3.6779751177574815, 47.11099843559241], [12.383734649302522, 21.247548964695262], [18.694683427368034, 39.74996642474981], [32.911916166633546, 11.736334016317308], [34.444947006476525, 43.054414543817145], [5.252213168253482, 11.530557185894086], [33.00244254196574, 5.841371579338481], [41.489860138642634, 38.43626219065863], [29.04186345782916, 9.481519780951993], [5.290268360722474, 33.21085707950223], [31.89021469974632, 7.1932369785998835], [37.39553036914058, 28.422961275273007], [40.64239149098543, 47.26006707612347], [23.336638386010392, 47.24434559465613], [14.111999486035826, 10.561849556556275], [22.611829646007543, 8.534842392449507], [41.754635773829406, 43.38832939011367], [43.61673519668871, 23.069672592995744], [45.92155364083659, 34.77116542303488], [26.87687524825784, 16.740432702245812], [3.4925092356433742, 16.26742214549526], [41.95502747818493, 4.104252181504648], [46.10702384463992, 4.6494962976254985], [11.310381237161232, 15.274884406622443], [42.52796122337514, 15.363985142041374], [26.297409434482777, 35.0961314996978], [36.56234031350279, 33.29186120967871], [34.753780626397436, 46.2788207833226], [34.48601573197257, 13.470849740984594], [39.88353722429927, 36.14209780336713], [42.07658478097371, 3.20259019153752], [22.868387474047545, 14.12638504370087], [32.18740606528844, 32.866250808352184], [20.91720833488793, 31.887114211022013], [17.07351193701568, 8.48489946280411], [34.23651755522891, 16.525073614991513], [45.757548512030816, 37.21180983579486], [30.731756246634237, 30.58014005053308], [8.229801446585801, 9.269236022127252], [36.508736683181326, 4.114480194486326], [45.94217345401646, 25.211942661760432], [18.76407795680245, 41.708475718585824], [29.977581560785264, 5.817029612048403], [33.09939210646046, 31.696434703494575], [30.690022211088714, 22.670525201060897], [27.378407864696158, 3.0839461148532505], [46.201066491531314, 17.00031695932298], [8.635197674427905, 17.516111004076205], [46.30774477363407, 32.942925202466775], [20.187256777283377, 23.164090361471303], [31.521683831369103, 3.23771220257062], [34.802291434873446, 3.118106289910029], [24.30698429337567, 16.181928336423113], [21.747482872127577, 5.9276791742361645], [4.239054324124071, 8.426699484094744], [26.727844573237437, 12.204189896357098], [28.371792227450698, 37.08297521868399], [7.585000247308343, 22.61268545683452], [23.882269237234173, 20.195864562887643], [13.76747503976765, 18.570817499709282], [29.87371054107238, 23.412262020923], [29.74995778237021, 33.28500169433464], [18.11210474315954, 19.202939361832406], [40.15331156274399, 19.919882530419123], [11.447627043178244, 37.90740351589589], [4.175337015240151, 14.118813749605232], [29.798894378165553, 32.891538462618], [39.94010926144222, 24.298249565973645], [25.827335573447556, 24.71479241841533], [21.317291791169822, 9.598068448882792], [3.3161559430391536, 6.962237444519229], [27.45849569911668, 37.45714647989355], [34.426225551639874, 11.444158027649433], [33.325910611708764, 16.505143057605558], [23.930606087336468, 37.32796214053231], [29.902258719239995, 23.193017268356876], [24.291542277018618, 15.651422381757193], [6.35598300738674, 30.736664851851796], [27.668393488340325, 39.143183191270424], [19.231567962520035, 32.53376532460899], [36.433893902857115, 28.52360220544813], [28.041436753712, 17.239614380516326], [36.32718295891816, 22.500849485482963], [24.18147174611702, 26.275550472703827], [47.50713286293221, 8.604025550952011], [43.36119467797342, 40.67731624479241], [20.605489480668606, 47.6196380707767], [45.11600239146732, 32.902757823747336], [17.998983938941752, 45.46502790587426], [46.83094876092378, 33.714180375105315], [24.050474403617454, 33.59328948661779], [45.41779064928242, 19.844666236824402], [47.0972242997281, 32.154101052192125], [34.437333682010404, 28.570685631666564], [21.37631871310281, 37.566364360230764], [6.0462705071067635, 7.768618392664582], [43.04074335998874, 40.53902325120606], [17.556689573197175, 10.90108966870217], [34.77020149420426, 12.049195077586996], [47.55676677597994, 10.283149908324157], [27.982029893690978, 39.453719107581826], [37.43609608703727, 25.136501330637532], [39.935679718926956, 22.936959810984842], [33.44173093372666, 3.719385420730653], [11.74400674405788, 15.016688116147435], [31.19581567669078, 7.311141784302024], [41.81536597123964, 38.12094322210054], [11.021593037616375, 38.08358321777198], [22.146640595311382, 23.114486352838153], [15.975585747735071, 25.11087537965714], [10.889188361763866, 19.31383467965718], [26.856062883443734, 14.925073616473195], [23.0768366496252, 30.590872509686278], [4.722119801620419, 31.594383295554998], [43.789375125246266, 34.25085150538349], [5.9352903788958224, 24.073229235188673], [16.331753881560164, 42.91888755867838], [12.95161985177732, 18.646127565303647], [26.316762372276482, 29.666596712589783], [24.288083918991802, 27.0052749014212], [36.956320302500615, 9.798184858671974], [19.319182546794814, 4.836783030443353], [45.04052580098755, 9.392123181988339], [28.344759907740883, 15.62595949068494], [11.625156591243503, 39.05895898763162], [46.03719409816087, 16.615964481798716], [21.701767455726547, 29.547638756939097], [41.25286373726776, 2.6806870762341806], [27.755853167444382, 5.994354488467158], [2.583497202660201, 11.383164935281608], [45.98919129267145, 4.499628602813493], [43.269234517793855, 32.55171119315037], [4.865775038874137, 20.037130816800754], [10.682640794854013, 37.857416873395266], [24.77880225894019, 22.440616407977117], [19.190227843482887, 26.980898331335478], [29.454853604292715, 24.707829687088527], [13.114681923300608, 26.9972894301172], [32.005442001865944, 9.785451065540558], [44.50092681400038, 3.914651903577284], [34.852509534984215, 16.058935222597654], [29.454070481359256, 12.571930034863652], [26.20561017429703, 26.324187265348247], [34.765630184417645, 32.82810787266427], [10.825541566003842, 45.17528093541183], [36.29456719262729, 42.00715945202427], [39.708789252409915, 4.093429231537563], [45.99304865228322, 35.23768798095341], [45.59068351312605, 4.782019876309869], [17.397488832736, 32.01301859763209], [47.22942140240564, 12.706833140921772], [7.1246202886874395, 16.029199198689646], [21.96524809561712, 14.597481470961071], [4.603396010327841, 16.311387045189967], [16.074343122103627, 27.506650651611384], [20.693068950146948, 13.019570488351098], [35.471046996417805, 21.793327182306978], [43.132328971279975, 17.77066907815636], [18.55126405917244, 25.035385575679793], [13.194009060573253, 11.137387815853769], [29.943342870119714, 22.417173301628765], [16.8428693878699, 40.4244914024946], [31.658037594194163, 32.59291714064548], [4.070044886795417, 35.15121799835996], [44.033962335895346, 2.1838803092178054], [6.868257551130263, 13.63715726233424], [24.534923202131484, 35.86369178500678], [45.85173910449789, 40.40955285519541], [44.694660598504925, 13.212229925661921], [25.51016754692361, 31.41595436262884], [24.42194924147053, 15.58449227026633], [17.267749454327813, 47.454447039676], [20.63429773037694, 38.06561793182817], [18.391394900750825, 45.07410848751633], [20.87999305901347, 18.77880758187706], [24.14996526165407, 3.3665065932632503], [3.879027120252654, 24.601561827134226], [40.856542621857756, 11.238335642051865], [14.598176594640751, 9.59798774226292], [42.7649541673571, 21.366734668524387], [46.902652317919966, 22.53427341997945], [23.096022308877032, 42.723944475138], [45.293740159674236, 28.669232985445106], [36.77103157099239, 27.79119725597599], [24.24487192872396, 7.712731162377763], [34.235884461925004, 30.50437438738057], [36.144626608318205, 6.395168871279645], [18.371077987001854, 33.15272253446467], [26.923950713741988, 29.31747426477061], [32.40122590141622, 24.355199634141584], [21.665780833259806, 33.81109111039697], [24.20878872941368, 22.268183908835876], [41.16985298565631, 29.698642201325967], [32.679798448297234, 40.835265383279435], [3.499214864029047, 20.896840555248183], [3.7550243586573204, 36.013464519000465], [15.214206067763552, 6.332467492340928], [3.187008587946484, 35.6794299229234], [20.615706734958366, 14.17592604805791], [41.86749989378895, 25.744096137751807], [15.175531559794521, 22.059288258989387], [19.238965139810915, 41.614430231482295], [16.878062147676467, 41.94197700320442], [20.21311522033151, 41.977433519677916], [12.499812748886379, 7.720161238831023], [41.36403013841378, 47.43508725955442], [29.99645147445697, 8.217085488682049], [2.267874118792502, 38.476446677795074], [43.59031044136244, 27.586978203441934]] 
        # self.obstacles = [[8.819177206461367, 44.02985356234912], [23.824188458264622, 42.157150652727324], [30.844761313028382, 34.66397410905517], [34.55571650730743, 43.135586185158374], [29.321974923163747, 32.05110232708371], [42.093551375933856, 24.437107806382325], [12.801996641187873, 41.773183700469986], [37.268734408570715, 34.92528423068171], [41.30858650957383, 15.794181238429385], [15.960570972879703, 37.515658930686044], [27.82079769785174, 11.923534783868968], [15.717638850248825, 28.861211479583805], [39.763138366839776, 26.5632866646802], [28.284549270437854, 21.97294143800298], [42.58963826619373, 23.54294264191701], [3.0473102906706555, 34.532672461429634], [2.2819076991129608, 11.607836593288066], [11.503531392849174, 34.8976461805282], [28.90301295235766, 44.39313876822295], [4.057291736349686, 17.972884985023907], [5.808405917424164, 36.649032223190055], [24.054203279679005, 45.08753308542018], [2.6248022151786246, 34.67479116256204], [35.03890905890003, 42.157616052296866], [43.39769966217192, 4.371126539978706], [22.21011156108116, 35.968112969209486], [24.953788813192922, 47.530719714439485], [36.34996730297508, 12.188552843637707], [45.16699972906811, 25.08025561071461], [25.892051009337923, 18.78691865727123], [32.96160768116182, 8.714033544993544], [41.059904760292994, 39.16455359426036], [42.96368663098626, 35.76872889014093], [6.3431953848063785, 28.463810263575944], [23.401968914282445, 2.3730798275436076], [7.502249155871251, 15.493345822375167], [34.40824980862554, 34.370312035170336], [23.13459929022568, 27.967366622565905], [38.62910425679634, 34.45732280947998], [30.37668590350756, 8.610190123496626], [15.525028364716421, 4.35596986389135], [34.43019176508211, 15.594993106671831], [2.889174457929258, 31.595892640077498], [17.181089467170445, 13.594965579852397], [40.15454458107814, 34.94607122310499], [24.354021494619122, 43.527947324713196], [3.742111522627653, 19.779951884724106], [43.7893389813864, 18.968822016342582], [18.227028759395, 46.16962980364664], [2.189955154945971, 46.49087431946602], [7.000124712786684, 20.624092289507253], [6.645115095895218, 6.818752317324679], [42.89911973785486, 36.518681417482604], [45.86319090737953, 8.925303982907181], [23.980148316044904, 35.165688875992245], [19.98805222687171, 14.184701067749046], [5.354206836276731, 36.34155148905561], [3.2855907000890627, 24.473135648952177], [44.325501906255916, 38.45367372977872], [26.88074539680888, 44.854282095911], [25.8653210579705, 14.014976354455436], [36.46268078490663, 15.083958857301498], [11.247362301748629, 32.28208840216243], [25.2906736958241, 4.753266202799661], [20.546725066926776, 40.70042113413655], [45.89187310081901, 21.774282337233608], [7.124107154236812, 26.198595490901866], [32.00555353565133, 15.335641923983667], [30.274922591180253, 35.80870929866388], [13.000557061203361, 43.36282424757726], [45.92682521196514, 19.227250614538068], [18.67921866528336, 20.626879363442047], [45.096427139110574, 26.247752454190206], [45.96454832329874, 22.06249661906505], [38.01885844045909, 3.422796845938154], [36.35311659940529, 3.401394014499704], [16.115855841172483, 33.905413396238316], [45.384225195869746, 6.780548336254989], [39.35607577156263, 21.535294069866048], [36.36572717357805, 5.472626633444085], [28.7432049495714, 35.219763620969275], [25.222976003171976, 42.658398124168265], [29.63011754932469, 21.291878849846256], [5.738492316309881, 28.67439955072905], [32.71221804883219, 7.867004497361916], [12.33473370671753, 41.87847083691019], [23.7577046878746, 12.33506054551783], [27.352741295192388, 47.339087775923936], [16.797492626104287, 7.552255808278596], [19.745993240644196, 17.585429084370347], [8.559676845526617, 19.967672929496413], [7.40117718830316, 25.529824516294084], [25.92707449224839, 28.447117228589498], [9.043923780106965, 38.899831561167325], [41.187710504134884, 15.398778400185682], [13.072907903281463, 20.433349779178293], [35.71653727019269, 6.300160196256561], [12.50019224819512, 43.6489967718216], [14.772854383661157, 13.041596649265617], [41.82302324413521, 25.54577948025653], [37.59138347622273, 17.733725427653244], [46.95250735806989, 42.17068457373724], [26.432165993844293, 27.547212176249115], [4.577687527136597, 43.2964793204156], [14.199772922388929, 33.79478944491137], [32.32681686842929, 22.541295324289386], [14.571069606499512, 27.37578752569027], [34.23469731416729, 3.2874025494267882], [46.30901583372356, 46.843901825635676], [20.37067809971704, 18.985505773443496], [19.047696537037726, 24.612692910535785], [4.774082527288598, 17.02769223213916], [14.617245343163349, 16.186289157021488], [19.722051601192586, 3.4953694855664805], [10.201379094855719, 32.336881664653575], [39.563504466371036, 9.976422103695633], [30.06198611380206, 15.95551908375711], [42.73481138564823, 8.725870022222885], [33.189289622846346, 34.87828840599276], [6.6389887323869345, 6.00689786411416], [43.38509361166136, 38.61024240008819], [43.065553929384706, 3.121710514549351], [41.86982139733639, 32.646238792216565], [42.92990157907738, 44.69691139487218], [38.44174561717428, 12.664653079822415], [3.929736154142984, 47.39270661807612], [11.871685320397395, 39.49632020366338], [42.95852832883636, 11.70497625388239], [6.0925982205766, 6.396899737868728], [11.109629988330015, 9.945402217955479], [21.543197444318945, 6.908028691726424], [24.78627322369902, 27.05476200672888], [18.442869649821237, 35.219183969743526], [33.388523644996866, 45.48918700345094], [21.73197870696357, 30.184679874865342], [32.383904665514834, 45.78912185614646], [26.016229864640103, 29.96887270917267], [31.21076087328734, 9.393808913583504], [34.83576444049266, 36.80183945605069], [43.55734251529404, 10.321927368889817], [22.984807210130292, 35.382814667216024], [37.09981801768542, 11.042783850573754], [11.257326587004984, 8.200949397392687], [29.2957461847113, 14.339048282696318], [34.145489017526224, 6.987729420451307], [28.901041672086844, 3.694964858373103], [13.539968312594223, 4.738643295365018], [8.412484242980291, 13.673962971558419], [26.54974726520482, 37.49485992426954], [14.906299895679501, 13.888562508246984], [41.62924128152848, 20.073811464277906], [4.776274465739327, 18.86753763692094], [41.24068014334183, 22.33271174510663], [42.76409283399724, 2.4907830856521294], [9.439412316004237, 7.797084855943366], [31.9077608704797, 18.95999774704547], [34.99921939196946, 5.526142893054518], [14.318888523742425, 44.49960027191503], [2.361503614485593, 13.58297827082398], [10.064466464528126, 22.371625871558805], [15.634327265093836, 2.0061090606538716], [2.0199936642803, 28.120032320168566], [30.161504462904364, 34.00480075368747], [23.65477153876509, 4.745394599240532], [45.651916820444335, 3.7687646577370644], [4.904503729577957, 3.984117201123813], [45.561225773243756, 18.412901884603542], [19.058321756902053, 24.045922307233482], [24.6868706387671, 37.49858105614057], [14.162637401073834, 33.10077119891692], [41.20417515620326, 17.530690851272105], [3.729333599813126, 2.4169283419579566], [26.363217725462476, 6.447849516886088], [31.97820827460006, 47.669407365046155], [14.620969891551123, 16.353889206735765], [8.680435814440385, 44.526483300982164], [17.42208586759245, 45.86922441639552], [14.0940734268842, 33.98766178102386], [19.95761250722126, 26.590143361298963], [16.88932755908501, 42.358951359824964], [31.147241616242283, 38.07214513353052], [15.927059777488424, 27.91298938315532], [33.661176521973076, 30.032816336941433], [22.40889214817413, 31.19567052505948], [20.90785412873932, 4.145620325505943], [13.466903256394943, 22.361442404419016], [38.763325598297214, 35.28480575678693], [40.90064007550813, 33.282099548585336], [14.50854448093518, 20.06462811802999], [33.29853324728499, 11.400130153111501], [22.803839427865846, 3.186403196837773], [28.68581673255172, 33.75232385784104], [6.456885316160403, 25.496170250132856], [12.939058554502338, 13.076104340019473], [44.54070625147137, 14.587333046243764], [6.627130492331614, 22.630159707144795], [17.41030068849296, 28.52008547675366], [39.39625609473088, 2.3358751758373635], [6.4508940981513145, 23.991193419477433], [35.79173134891604, 25.8044226461579], [18.85312816614133, 20.539436372752984], [31.549007895483072, 8.991364151846598], [16.642371093765423, 36.86611021088347], [46.811739974285764, 31.14639672420238], [46.56891430354912, 8.894828977947775], [6.4869873008035475, 25.279827128207696], [23.923589520561602, 36.69831642395277], [3.714006245280199, 17.91825271714002], [44.075396492067654, 6.65825933602003], [2.0340732144190996, 19.83121106255413], [26.63312673075492, 30.584151141357744], [32.53627700261006, 25.360062031635355], [43.34261437995462, 4.945746373838308], [47.2099740204807, 10.68423126960832], [8.382324495945925, 19.559529654384143], [26.84677405759666, 5.366651749073756], [24.42798504853188, 24.316782434384088], [16.619482753912788, 19.214372102757682], [11.49300978621344, 26.70331478784982], [32.32566302375915, 44.59149463674782], [34.27637976107086, 15.027082643115595], [42.33951027265925, 22.62642990044223], [39.34318981724424, 17.031114112622177], [36.66880915101073, 47.76442675360787], [16.59063760885349, 45.88713036512217], [38.90956644081071, 6.548992116079231], [18.54326116723744, 26.08973170739399], [5.084126956412262, 41.83357163070515], [12.850341055075523, 42.008937110966244], [15.463497406417625, 37.315248614925245], [45.8666005210524, 45.74797883253523], [20.261194819631154, 31.395310834917833], [35.09352094551115, 37.49113554044822], [18.45737562862683, 36.791724367293185], [33.913993279821206, 5.845242004065823], [36.61111844723008, 46.53169071076095], [15.235257573168372, 10.787666563346153], [39.987307343800744, 15.0244183567786], [3.109136498575807, 38.892609618377875], [9.219792053215066, 41.51336081004733], [12.526841048741883, 13.175242677569692], [41.977392121063914, 6.350260121340777], [42.52739175349303, 44.582770056070565], [28.23118322567275, 25.089168540619298], [42.19069436567611, 18.175703989650067], [40.70856896182042, 41.71349100587022], [42.7058878851186, 33.174060587924885], [27.942775866349727, 26.750840171685955], [34.0534752499429, 5.568294420410449], [36.230812488913664, 24.130107869175056], [3.0486040114148603, 22.633356919563035], [4.564161141331853, 36.26601794957383], [30.969165534573378, 13.289000308154282], [43.30646029236336, 23.381228943579703], [24.16781008383572, 8.993122827661454], [31.036872743365425, 41.72555577798759], [6.944873482250229, 16.481138796727922], [32.44430599439592, 17.61133013531417], [25.334519904264504, 9.897734195250383], [31.692065143318878, 15.607110911750896], [33.69631959443338, 33.33727282907674], [18.084729037844525, 26.134473869447856], [19.70480492517518, 26.753753019599813], [3.0014065130494734, 26.48887629746241], [31.046974090468304, 24.791934283735603], [3.229774532751536, 8.292956686602357], [24.994594649737035, 31.903733575885674], [17.938949647795226, 39.484641088191886], [44.78435079111644, 34.47795039502011], [21.770691978593128, 25.99625039633116], [30.979253214998405, 2.0854676050427896], [21.65898454261613, 8.940600286178228], [24.260075974613354, 25.932263597451527], [15.724445355636256, 38.04117441344639], [25.825172075238388, 8.5255175170244], [9.750918032584444, 4.4934539587634195], [17.165441541831846, 47.59770200986866], [10.396997287653651, 16.88539730066954], [19.375630563300835, 22.59865931795307], [46.04120294992891, 32.79845179749741], [31.276567145314107, 29.271954649792768], [8.325803175111087, 29.081208747133946], [33.67201652859529, 42.15125813873721], [46.396390380444345, 18.689652985169403], [13.48556993938678, 31.79856527961634], [25.531479047072153, 45.798741162889314], [34.45976160176926, 44.24466462746252], [21.729451630389736, 10.47030037463756], [13.525247334243199, 12.646319728507299], [31.782337617613177, 3.341538891380785], [8.958703119756436, 22.270851771936016], [46.63798258594531, 6.6264777948219304], [44.60439722104661, 44.525905023328534], [2.8554635588028305, 6.460705882946963], [9.43510140999782, 19.08706815236069], [7.264915762096185, 40.80446407874726], [47.349810580251834, 45.82569435387471], [24.05984917930418, 22.835880570221065], [11.111559293971467, 6.25268575748416], [45.536566545258744, 12.816814857058242]]
        # self.obstacles = [[12.698182863212056, 17.304648125425693], [42.63486069602185, 27.803328920160183], [33.00701953016346, 37.33610026238718], [33.968006002915054, 17.3095021198517], [19.675843786704135, 30.3277112498197], [44.62816833691433, 31.715104892790503], [23.9025328362575, 18.026473376364674], [23.854231022526662, 44.074174130856925], [21.875051864717417, 39.236276667683605], [18.28004638835353, 5.096890811782804], [23.027405520323878, 39.01073790510974], [21.504952340063674, 37.74235688312595], [22.79906921219544, 31.34947384564842], [32.648854416834624, 18.22904680476297], [5.75843661504088, 9.348872233739286], [39.99292430657139, 17.648650311045923], [10.081412180653622, 28.527621997285337], [15.10353871413577, 31.886949787261408], [24.476676343254365, 35.174090094236924], [7.273208553976481, 42.230745644509824], [40.03665926721689, 16.291502993471607], [10.39069643509777, 21.121024390628577], [23.4515319775576, 5.004791558864008], [12.889577610019742, 45.355359887355], [18.987257489884932, 13.932233274164737], [12.993238367508466, 17.67318875962568], [26.48398767772577, 18.468112561443807], [4.256378421785987, 6.905986100605425], [5.117607397363824, 35.88876647795519], [2.301483129517793, 14.486781259713979], [14.74688339201019, 15.940811727617803], [30.582589910740943, 15.473802387849611], [32.38594154680767, 10.8316343518994], [3.516245316513955, 16.4157277902844], [30.458783089207977, 5.799146525478759], [33.408201598481114, 33.94748734756988], [25.89778384477025, 40.130466610064325], [33.996326786579104, 27.225891052779364], [9.136797591337604, 37.753180638088566], [29.216732574100522, 45.64914193305485], [40.03591383759728, 13.593022268407745], [41.789944540491746, 23.04975026346461], [35.51769402334852, 37.07066863025139], [40.35874842878142, 3.1986684223755377], [8.745576891788598, 32.868468193881], [31.377874888752142, 38.32863361883153], [10.899498972320368, 3.536436911814257], [19.601525875451745, 13.288975375416685], [9.428289325624199, 43.87871920504557], [12.591112120095364, 5.491069689286661], [2.401083999439998, 14.925086986380874], [40.19947924631443, 21.05385606897057], [18.866994624202597, 40.392509179931494], [42.03080342088506, 13.946554590828844], [10.945082053012783, 24.927374600999674], [5.840105689177962, 28.736152675172818], [17.43197751256711, 16.63552697193394], [11.488457224308023, 30.482114774074315], [39.20125795091941, 37.17159636108571], [3.4103546028391807, 21.445009495860134], [37.43329499277427, 21.770035721375013], [16.593639333200162, 43.37849798887275], [2.1587550867734304, 40.040293182738566], [14.794371697011547, 3.183302198263232], [17.810347531301733, 10.99019771879594], [33.14058538643968, 9.502427173293995], [25.29095362236734, 38.95180450449513], [45.93717491813072, 30.52380076979951], [42.329394597190486, 14.875052833225977], [13.103799271854623, 17.550550655266015], [2.607210958436975, 14.916993651434996], [40.523222946594984, 24.550369396512544], [7.12427236969968, 43.7096447333404], [43.58036348329529, 12.97628559489211], [42.732398890162415, 22.5963245284378], [17.772894667475295, 16.03858891919434], [24.227540146142655, 33.69292776381357], [34.19394232581903, 33.38433395099398], [17.327341062516574, 41.539472689161336], [42.7058322970004, 46.84934624257081], [7.799733622470333, 6.477407326744014], [23.897158564759902, 15.318929325178017], [9.247641410093077, 19.45794451901093], [12.228812871451417, 33.75044492643564], [29.899544186071196, 23.537586871649825], [20.932479608224202, 24.994847733883425], [9.820436910613171, 11.116737297194181], [44.691429034718155, 19.245502625972012], [21.736247715799507, 10.260539814403874], [33.95251294735324, 4.571014455954945], [36.4386058949073, 9.390942321157372], [27.172559750717678, 4.124470597186885], [17.258197020723347, 32.954339069339746], [12.558282733793408, 11.579916272360107], [42.6281965069043, 3.8375799811347253], [26.843535624646556, 30.98832092138176], [35.21963337181076, 43.514591470168355], [44.95732550651576, 25.730357225657215], [14.45355760034496, 4.2930005928559805], [45.015642141627325, 11.539857979491995], [41.63071939603403, 19.623081447198462], [15.470697570685061, 39.18458133976846], [27.895248479715534, 24.17246159685524], [18.909945179203373, 23.191564076827547], [34.20179797698172, 38.511102847454296], [41.990089835597246, 35.00974242320768], [4.991200687961999, 34.314282822571855], [27.971432321498682, 5.453933431988579], [5.1100818269352795, 43.8143824521292], [34.62462100734169, 32.592864737345145], [27.587988187194625, 40.14764749298033], [34.75102430970102, 22.92034476188412], [41.90815363673735, 5.29890038913911], [7.213932176040364, 16.542690376970754], [44.06161623602725, 22.819376693273274], [40.4049843937871, 2.7840322323720077], [10.10305967289501, 12.079514774393955], [8.905640952234148, 2.3345659583134317], [44.667738650019025, 38.687820271189096], [3.929406791396139, 7.155453445508055], [14.782105790027197, 10.055697950953432], [16.033473233767417, 29.437326864398955], [41.360864207648234, 6.93119675479396], [8.220603064825697, 24.079380452864196], [33.70539999656327, 12.195602364834587], [18.76008170710551, 43.34998657198039], [3.0942107873767437, 23.58332287441542], [30.109925187836648, 3.8923391444271838], [14.533095831142823, 44.34424833737866], [27.356828856205013, 47.43915338868636], [8.032711878861896, 19.556288885978017], [16.070880123545816, 2.9485965819477196], [2.0215529312973555, 5.053673607974086], [39.63657621735273, 35.54741757705962], [46.522485436758416, 29.827188122437576], [41.2255243503596, 4.6670373946824055], [32.570315534496316, 23.475004305030712], [44.33201139965696, 35.6819490939362], [12.659268909491352, 9.731107997507806], [39.360683615930526, 46.58901799247911], [12.273733598540204, 11.548559916252358], [31.236097366659354, 8.016793134049443], [13.430496192674001, 41.74714123727838], [46.0849076641973, 27.91771148519027], [13.7397953547422, 25.63628927832457], [38.54703440975796, 6.212621858125513], [16.56019735569235, 29.563695758124144], [11.708147771157137, 6.939620364325598], [7.403677213267482, 4.083465398180414], [35.16667337423902, 25.439300361141445]]
        # self.obstacles = [[2.9142703226302276, 5.455750933236738], [5.1356317414112045, 5.551648824816305], [2.1850695412813064, 6.361662705398652], [3.208568738748454, 3.8051472663509336], [7.016578202354779, 5.582526160860289], [7.453900660404201, 6.480465262713123], [6.646767769514513, 3.8616469265612983], [5.163595093471318, 2.424296776043814], [6.569745702699421, 3.906343009788534], [6.102136984761564, 6.212816790661049]]
        # self.obstacles = [[34.43244009547084, 26.86619662499736], [21.74152671114511, 12.932301493386252], [40.80393823012337, 21.776134494633112], [18.59238282043309, 34.536625522874886], [46.369119563942796, 43.66514393910526], [3.6234953311627844, 20.393309476505983], [47.48405592015918, 35.84472665179586], [10.36657878726735, 24.45262038618541], [13.070951186220961, 41.55135976413059], [6.44279903625555, 26.296827008229116], [18.83060659652306, 20.631351317878412], [23.735976247389775, 18.31317557294265], [36.691203349186665, 32.78756492173437], [24.527081195565607, 7.034279609226683], [12.844112059209724, 43.46588057349978], [42.72276995830974, 18.42747679598017], [39.158297323948645, 30.683663507827177], [27.124458728468046, 28.029356739476217], [8.60854104261371, 43.1766551143087], [27.459196860106363, 24.03625268890148], [26.113643690764178, 39.7054898723163], [25.70803435984227, 29.914020118644913], [45.209868632368455, 30.282844167185946], [2.0160739963729615, 44.95930539967487], [4.396232500247188, 42.809836014011225], [6.533239589174939, 17.67081575941006], [10.370904421324234, 29.096679537445745], [43.32162349891755, 8.705219712527997], [2.5904475688052644, 4.932750992402439], [22.07041710501727, 25.008176054311942], [27.8304350184071, 14.375084191120923], [30.913145424896054, 33.339236616780056], [31.064900458252797, 32.2545012871809], [38.44833064074026, 33.477261669129675], [16.64391001041415, 8.552787469408775], [17.94900576110767, 20.311999176528953], [39.902491929320625, 27.793862730333615], [32.096670245514986, 6.864512286427337], [46.30810064828051, 44.39099263873489], [4.091740700221509, 36.365018400614495], [2.62339882083905, 28.529238389106794], [26.96101691974489, 22.436543063959714], [20.89428204312476, 10.190840678522251], [24.102665776317597, 39.51410527215538], [24.89557635354782, 25.612319870645553], [26.75468540534996, 8.568536776047832], [6.031589536566058, 18.566638140459023], [37.62169772646796, 38.754718994679195], [46.35166108555826, 18.231327295604213], [12.003758581686142, 32.621384816911174], [22.064864410165608, 20.083635423669527], [22.06785066516495, 15.141193958624031], [37.07150910718652, 10.560390896271798], [15.495723853310219, 10.263197870680054], [39.2811622130032, 43.46754897621253], [25.61120931919391, 11.833196940705564], [29.521260344208546, 18.05121742125936], [10.67743027033374, 37.867368098995875], [46.251917930778795, 4.009193858691526], [33.582958957040056, 17.00469198363675], [18.861889742022786, 40.24431082956552], [45.94106720918913, 31.0352988619187], [14.392379977816105, 8.266977761333564], [47.22297012409588, 30.843786839136964], [7.404511451059453, 32.21956049290422], [8.950755064192304, 11.977036359644977], [39.70832219397674, 25.75589477247993], [10.241465398855974, 17.200758603479215], [40.68028773924545, 29.34354121492439], [7.85898636783273, 42.75399886194537], [16.957127445044726, 23.85234738371092], [17.914483544745387, 4.828406074352178], [18.274520155630775, 7.502451922435819], [29.70495160292785, 10.740721866773816], [36.95035376908559, 23.887290229616873], [41.456227843569756, 10.73392592322105], [7.788142392846003, 36.39165638723697], [14.45346720941147, 28.81686734919943], [12.982417915790474, 26.561935909663386], [42.45178414666976, 10.690964899487152], [12.902704469190475, 17.21268626531237], [45.74999435949064, 7.062975901156639], [31.763770444218206, 34.98578013014714], [47.80803372318322, 2.4302224869559916], [23.529489254317234, 36.62334169147685], [38.99739642723891, 26.259471243751072], [13.310145986045478, 24.405459903799553], [8.903345798480279, 2.8615667210571254], [2.9570238243005074, 20.28269211783138], [39.847728552233065, 38.903911108322916], [13.122066434930296, 16.23985171125352], [20.047954147803733, 20.104820691357343], [3.5412977936159433, 22.536325362044657], [36.701917050008845, 40.889835181683154], [32.470852101215, 11.525574069837079], [19.559171332913408, 26.43888052549448], [23.8302782268287, 16.596598433950433], [25.13699596663494, 21.719742700561902], [26.159459444002504, 45.19102487414407], [8.661654699871756, 22.444865725303487]]
        self.collision_point_placeholder = [None, None]
        self.hit_obstacle_placeholder = [None, None]
        self.new_point_placeholder = [None, None]

        self.build_hazards(self.num_obstacles)
        self.plot_hazards(self.obstacles)

        self.figure.canvas.draw()
        
        self.iterations = 0

        # print(self.valid_segment(self.waypoints[0], self.waypoints[1], self.obstacles))
        path_finished = False
        i = 0
        while not path_finished:
            self.iterations += 1
            self.resolution = self.resolution * (1 + (self.iterations / 5000))
            path_finished = self.build_path()
            print(self.iterations, self.resolution)
            if self.iterations > 5000:
                break

        # self.build_path()
        
        self.plot_path(self.waypoints, 'lime')
            
        # plt.plot(self.collision_point_placeholder[0], self.collision_point_placeholder[1], 'r*')
        # plt.plot(self.hit_obstacle_placeholder[0], self.hit_obstacle_placeholder[1], 'c*')
        print(self.obstacles)
        plt.axis("scaled")
        plt.show()


    def build_path(self):

        for idx in range(len(self.waypoints)):

            if idx < len(self.waypoints)-1:

                # Get current and next point from [points]:
                current_point = self.waypoints[idx]
                next_point = self.waypoints[idx+1]

                # Calculate slope and slope angle of the line:
                delta_y = next_point[1] - current_point[1]
                delta_x = next_point[0] - current_point[0]
                slope_angle = math.atan2(delta_y, delta_x)

                # Calculate distance between points:
                distance = math.sqrt(delta_x**2 + delta_y**2)

                # Step through the distance between the two points:
                step = self.resolution
                while step < distance:

                    # Calculate x and y at each distance along the line segment:
                    x = (step * math.cos(slope_angle)) + current_point[0]
                    y = (step * math.sin(slope_angle)) + current_point[1]
                    # x = (step * math.sin(slope_angle)) + current_point[0]
                    # y = (step * math.cos(slope_angle)) + current_point[1]
                    step += self.resolution

                    # Check if the point is too close to an object:
                    for object in self.obstacles:
                        if not self.valid_point([x, y], [object]):
                            # Adjust path
                            new_point = self.find_valid_point(object, slope_angle, (x, y))

                            if self.valid_segment(self.start_point, new_point) and idx > 0:

                                # self.plot_path([self.start_point, new_point], 'blue')
                                self.waypoints = [self.start_point, new_point, self.end_point]
                                
                            else:
                                self.waypoints.insert(idx+1, new_point)

                            if idx > 2:

                                for idx_2 in range(len(self.waypoints[:idx])-2):
                                    if self.valid_segment(self.waypoints[idx_2], new_point):# and idx < len(self.waypoints[:idx]):
                                        # self.plot_path([self.waypoints[idx_2], new_point], 'blue')
                                        self.waypoints = self.waypoints[:idx_2+1] + [new_point] + [self.end_point]

                            return False     
        return True


    def find_valid_point(self, center_point, slope_angle, intercept):

        inverse_slope_angle = -((2*math.pi) - slope_angle - (math.pi / 2))

        point_pos = self.find_valid_point_helper(center_point, inverse_slope_angle, 1)
        point_neg = self.find_valid_point_helper(center_point, inverse_slope_angle, -1)

        # Return whichever point is closer to the collision point
        if math.dist(intercept, point_neg) < math.dist(intercept, point_pos):
            return point_neg
        else:
            return point_pos


    def find_valid_point_helper(self, center_point, inverse_slope_angle, direction):

        step = self.tolerance * direction
        
        while True:
            x = (step * math.cos(inverse_slope_angle)) + center_point[0]
            y = (step * math.sin(inverse_slope_angle)) + center_point[1]

            step += (self.resolution * direction)

            if self.valid_point([x, y], self.obstacles):
                return [x, y]


    def valid_segment(self, start_point, end_point):

        # Find the angle of the line's slope:
        slope_angle = self.calc_slope_angle(start_point, end_point)

        # Find the distance of the line segment:
        distance = math.dist(start_point, end_point)

        # self.plot_path([start_point, end_point], 'black')


        # Iterate along the line:
        step = self.resolution
        while step < distance:
            
            # Calculate a point at the distance along the line:
            x = (step * math.sin(slope_angle)) + start_point[0]
            y = (step * math.cos(slope_angle)) + start_point[1]
            # plt.plot(x, y, 'y*')
            step += self.resolution

            # If the point collides with an obstacle, return True
            if not self.valid_point([x, y], self.obstacles):
                
                # self.collision_point_placeholder[0] = x
                # self.collision_point_placeholder[1] = y
                # self.plot_path([end_point, start_point], 'black')
                return False

        return True


    def valid_point(self, point, obstacles):
        
        # Check if the point is too close to each known obstacle:
        for object in obstacles:
            
            if point[0]-self.tolerance <  object[0] < point[0]+self.tolerance:

                if point[1]-self.tolerance <  object[1] < point[1]+self.tolerance:

                    distance = math.dist(point, object)

                    # If too close, return True:
                    if distance < self.tolerance:
                        self.hit_obstacle_placeholder[0] = object[0]
                        self.hit_obstacle_placeholder[1] = object[1]
                        
                        return False
                    # self.hit_obstacle_placeholder[0] = object[0]
                    # self.hit_obstacle_placeholder[1] = object[1]
                    
                    # return False
        
        # If all obstacles have been checked, return False:
        return True
        
    
    def calc_slope_angle(self, point_1, point_2):

        # ORDER MATTERS!
        return math.atan2((point_2[0] - point_1[0]), (point_2[1] - point_1[1]))

    
    def build_hazards(self, amount):
        
        for _ in range(amount):
            # y = random.uniform(2.0, 8.0)
            # x = random.uniform(2.0, 8.0)
            y = random.uniform(2.0, self.graph_size-2.0)
            x = random.uniform(2.0, self.graph_size-2.0)

            self.obstacles.append([x, y])

    
    def plot_hazards(self, obstacles):

        for object in obstacles:

            plt.plot(object[0], object[1], 'k.')

            # cir = plt.Circle((object[0], object[1]), radius=self.tolerance, color='r', fill=False)
            # self.ax.add_patch(cir)

    
    def plot_path(self, waypoints, color):

        if len(waypoints) > 1:

            x_ends = [waypoints[0][0], waypoints[-1][0]]
            y_ends = [waypoints[0][1], waypoints[-1][1]]
            plt.plot(x_ends, y_ends, color="grey", linestyle='--')

            for idx in range(len(waypoints)-1):

                x_values = [waypoints[idx][0], waypoints[idx+1][0]]
                y_values = [waypoints[idx][1], waypoints[idx+1][1]]
                plt.plot(x_values, y_values, color=color)


def main():

    PathPlanner()


main()
